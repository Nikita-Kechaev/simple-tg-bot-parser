# Инструкции по развертыванию бота для парсинга

1. Копировать репозиторий : git@github.com:Nikita-Kechaev/simple-tg-bot-parser.git
2. Создать ТГ бота. Инструкции: <https://core.telegram.org/bots>
3. В коревой директории создать файл .env (прим. env_example)
    * Указать API-Токен созданного бота
4. Создать виртуальное окружение:
    * python3 -m venv venv
5. Активировать виртуальное окружение:
    * source venv/bin/activate
6. Уcтановить зависимости:
    * pip install requirements.txt
7. Активировать бота:
    * python3 main.py
8. Деактивировать бота:
    * Ctrl + C

## Работа с ТГ - ботом

1. В приложении ТГ бот активируется командой /start
2. Далее необходимо загружать xls файл с 3мя заполненными ячейками 1ой строки:
    * 1 ячейка: Произвольное имя
    * 2 ячейка: URL ссылка на страницу, которую будем парсить
    * 3 ячейка: xpath для парсинга
3. Данные сохраняются в sqlite3
4. Кнопка /average считает среднюю цену произвольного товара
    * В качестве тестовых данных считается средняя цена 2х дисков God of War с двух произвольных сайтов
    * Таблицы необходимые для загрузки через ТГ - бота таблицы с URL и xpath представлены в папке files в корне проекта (для тестирования их необходимо загрузить в БД через интерфейс ТГ бота)

### Послелсовие

1. Не смог реалезовать загрузку файлов по нажатию кнопки.(обработчик просто берет любой файл из потока, соответственно при загрузке файлов других типов возникнут ошибки)
2. Задание заняло 12 часов времени и оказалось очень сложным для меня в реализации.))
3. Иcпользуемая документация:
    * <https://docs.python-telegram-bot.org/en/v20.0a2/>
    * <https://docs.python.org/3/library/sqlite3.html>
    * <https://khashtamov.com/ru/pandas-introduction/>
    * <https://stackoverflow.com/questions/62253718/how-can-i-receive-file-in-python-telegram-bot>
